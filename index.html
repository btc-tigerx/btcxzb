<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>â‚¿ BTCç»¼åˆæŒ‡æ ‡ç³»ç»Ÿ - ä»˜è´¹è®¢é˜…ç‰ˆ</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>â‚¿</text></svg>">
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', sans-serif;
            background: linear-gradient(135deg, #0a0e27 0%, #1e1b4b 100%);
            color: #ffffff;
            min-height: 100vh;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 20px;
        }

        .hidden {
            display: none !important;
        }

        /* ç™»å½•ç•Œé¢ */
        .login-box {
            background: rgba(21, 25, 50, 0.8);
            border: 1px solid rgba(255, 153, 0, 0.3);
            border-radius: 20px;
            padding: 40px;
            max-width: 400px;
            margin: 100px auto;
            backdrop-filter: blur(10px);
            box-shadow: 0 20px 60px rgba(255, 153, 0, 0.1);
        }

        .btc-logo {
            text-align: center;
            font-size: 4rem;
            margin-bottom: 20px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.8; transform: scale(1.05); }
        }

        h1 {
            text-align: center;
            font-size: 2rem;
            background: linear-gradient(135deg, #f7931a 0%, #ff9900 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .subtitle {
            text-align: center;
            color: #a0aec0;
            margin-bottom: 30px;
            font-size: 0.9rem;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #cbd5e0;
            font-size: 0.9rem;
        }

        input {
            width: 100%;
            padding: 12px 16px;
            background: rgba(30, 41, 59, 0.5);
            border: 1px solid rgba(255, 153, 0, 0.2);
            border-radius: 10px;
            color: #ffffff;
            font-size: 1rem;
            transition: all 0.3s;
        }

        input:focus {
            outline: none;
            border-color: #f7931a;
            background: rgba(30, 41, 59, 0.7);
            box-shadow: 0 0 15px rgba(247, 147, 26, 0.2);
        }

        .btn {
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-bottom: 10px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #f7931a 0%, #ff9900 100%);
            color: #ffffff;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(247, 147, 26, 0.3);
        }

        .btn-secondary {
            background: rgba(30, 41, 59, 0.5);
            color: #cbd5e0;
            border: 1px solid rgba(255, 153, 0, 0.2);
        }

        .btn-secondary:hover {
            background: rgba(30, 41, 59, 0.7);
            border-color: #f7931a;
        }

        /* ä»˜è´¹é¡µé¢ */
        .payment-page {
            max-width: 800px;
            margin: 50px auto;
        }

        .payment-card {
            background: rgba(21, 25, 50, 0.8);
            border: 1px solid rgba(255, 153, 0, 0.3);
            border-radius: 20px;
            padding: 40px;
            backdrop-filter: blur(10px);
            margin-bottom: 20px;
        }

        .payment-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .payment-header h2 {
            font-size: 2rem;
            color: #f7931a;
            margin-bottom: 10px;
        }

        .payment-header p {
            color: #a0aec0;
        }

        .pricing-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .pricing-item {
            background: rgba(30, 41, 59, 0.5);
            border: 2px solid rgba(255, 153, 0, 0.2);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            transition: all 0.3s;
            cursor: pointer;
        }

        .pricing-item:hover {
            border-color: #f7931a;
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(247, 147, 26, 0.2);
        }

        .pricing-item.recommended {
            border-color: #f7931a;
            background: rgba(247, 147, 26, 0.1);
        }

        .pricing-badge {
            display: inline-block;
            background: #f7931a;
            color: #000;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .pricing-title {
            font-size: 1.2rem;
            font-weight: 700;
            color: #fff;
            margin-bottom: 15px;
        }

        .pricing-price {
            font-size: 2.5rem;
            font-weight: 700;
            color: #f7931a;
            margin-bottom: 5px;
        }

        .pricing-period {
            color: #a0aec0;
            font-size: 0.9rem;
            margin-bottom: 15px;
        }

        .pricing-save {
            color: #10b981;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .wallet-section {
            background: rgba(30, 41, 59, 0.5);
            border: 1px solid rgba(255, 153, 0, 0.2);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
        }

        .wallet-title {
            font-size: 1.1rem;
            color: #f7931a;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .wallet-address {
            display: flex;
            align-items: center;
            gap: 10px;
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 10px;
        }

        .wallet-address input {
            flex: 1;
            background: transparent;
            border: none;
            color: #10b981;
            font-family: monospace;
            font-size: 0.95rem;
        }

        .btn-copy {
            padding: 8px 16px;
            background: #f7931a;
            border: none;
            border-radius: 8px;
            color: #000;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-copy:hover {
            background: #ff9900;
            transform: scale(1.05);
        }

        .payment-steps {
            background: rgba(30, 41, 59, 0.5);
            border: 1px solid rgba(255, 153, 0, 0.2);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
        }

        .step-item {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            align-items: flex-start;
        }

        .step-item:last-child {
            margin-bottom: 0;
        }

        .step-number {
            width: 30px;
            height: 30px;
            background: #f7931a;
            color: #000;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            flex-shrink: 0;
        }

        .step-content h4 {
            color: #fff;
            margin-bottom: 5px;
        }

        .step-content p {
            color: #a0aec0;
            font-size: 0.9rem;
        }

        .contact-info {
            text-align: center;
            padding: 20px;
            background: rgba(30, 41, 59, 0.5);
            border-radius: 15px;
            border: 1px solid rgba(255, 153, 0, 0.2);
        }

        .contact-info p {
            color: #cbd5e0;
            margin-bottom: 10px;
        }

        .contact-info strong {
            color: #f7931a;
            font-size: 1.1rem;
        }

        /* é¡¶éƒ¨å¯¼èˆªæ  */
        .header {
            background: rgba(21, 25, 50, 0.8);
            border: 1px solid rgba(255, 153, 0, 0.2);
            border-radius: 15px;
            padding: 20px 30px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            backdrop-filter: blur(10px);
        }

        .header-title {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .header-btc-logo {
            font-size: 2.5rem;
        }

        .header-text h2 {
            font-size: 1.8rem;
            background: linear-gradient(135deg, #f7931a 0%, #ff9900 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .user-badge {
            padding: 6px 12px;
            background: rgba(247, 147, 26, 0.2);
            border-radius: 8px;
            font-size: 0.85rem;
            color: #f7931a;
            font-weight: 600;
        }

        .vip-badge {
            background: linear-gradient(135deg, #f7931a 0%, #ff9900 100%);
            color: #000;
            padding: 6px 12px;
            border-radius: 8px;
            font-weight: 700;
            font-size: 0.85rem;
        }

        .expiry-info {
            color: #a0aec0;
            font-size: 0.85rem;
        }

        .btn-logout {
            padding: 8px 20px;
            background: rgba(239, 68, 68, 0.2);
            border: 1px solid rgba(239, 68, 68, 0.3);
            border-radius: 8px;
            color: #ef4444;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-logout:hover {
            background: rgba(239, 68, 68, 0.3);
        }

        /* ä»ªè¡¨ç›˜ */
        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .dashboard-card {
            background: rgba(21, 25, 50, 0.8);
            border: 1px solid rgba(255, 153, 0, 0.2);
            border-radius: 15px;
            padding: 25px;
            backdrop-filter: blur(10px);
        }

        .dashboard-card h3 {
            font-size: 0.9rem;
            color: #a0aec0;
            margin-bottom: 15px;
        }

        .dashboard-value {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .dashboard-value.positive {
            color: #10b981;
        }

        .dashboard-value.negative {
            color: #ef4444;
        }

        .dashboard-value.neutral {
            color: #f7931a;
        }

        .dashboard-change {
            font-size: 0.85rem;
            color: #a0aec0;
        }

        .update-time {
            text-align: center;
            padding: 15px;
            background: rgba(30, 41, 59, 0.5);
            border-radius: 10px;
            margin-bottom: 20px;
            color: #a0aec0;
        }

        .update-time strong {
            color: #f7931a;
        }

        /* é›·è¾¾å›¾ */
        .radar-container {
            background: rgba(21, 25, 50, 0.8);
            border: 1px solid rgba(255, 153, 0, 0.2);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
        }

        .radar-container h3 {
            text-align: center;
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: #f7931a;
        }

        /* æŒ‡æ ‡åŒºåŸŸ */
        .indicators-section {
            margin-bottom: 30px;
        }

        .category-title {
            font-size: 1.3rem;
            margin-bottom: 15px;
            padding: 10px 20px;
            background: rgba(247, 147, 26, 0.1);
            border-left: 4px solid #f7931a;
            border-radius: 8px;
        }

        .indicators-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .indicator-card {
            background: rgba(21, 25, 50, 0.8);
            border: 1px solid rgba(255, 153, 0, 0.2);
            border-radius: 12px;
            padding: 20px;
            backdrop-filter: blur(10px);
            transition: all 0.3s;
        }

        .indicator-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(247, 147, 26, 0.15);
            border-color: #f7931a;
        }

        .indicator-name {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 15px;
            color: #f7931a;
        }

        .indicator-value {
            text-align: center;
            padding: 15px;
            border-radius: 10px;
            font-size: 1.2rem;
            font-weight: 700;
        }

        .indicator-value.bullish {
            background: rgba(16, 185, 129, 0.2);
            border: 2px solid #10b981;
            color: #10b981;
        }

        .indicator-value.neutral {
            background: rgba(107, 114, 128, 0.2);
            border: 2px solid #6b7280;
            color: #6b7280;
        }

        .indicator-value.bearish {
            background: rgba(239, 68, 68, 0.2);
            border: 2px solid #ef4444;
            color: #ef4444;
        }

        /* ç®¡ç†å‘˜ç•Œé¢ */
        .admin-panel {
            background: rgba(21, 25, 50, 0.8);
            border: 1px solid rgba(255, 153, 0, 0.3);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
        }

        .admin-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 25px;
            border-bottom: 2px solid rgba(255, 153, 0, 0.2);
        }

        .admin-tab {
            padding: 10px 20px;
            background: transparent;
            border: none;
            color: #a0aec0;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s;
            border-bottom: 3px solid transparent;
        }

        .admin-tab.active {
            color: #f7931a;
            border-bottom-color: #f7931a;
        }

        .admin-content {
            display: none;
        }

        .admin-content.active {
            display: block;
        }

        .indicator-buttons {
            display: flex;
            gap: 10px;
        }

        .indicator-btn {
            flex: 1;
            padding: 10px;
            border: 2px solid;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            background: transparent;
        }

        .indicator-btn.bullish {
            border-color: #10b981;
            color: #10b981;
        }

        .indicator-btn.bullish:hover,
        .indicator-btn.bullish.active {
            background: #10b981;
            color: #ffffff;
        }

        .indicator-btn.neutral {
            border-color: #6b7280;
            color: #6b7280;
        }

        .indicator-btn.neutral:hover,
        .indicator-btn.neutral.active {
            background: #6b7280;
            color: #ffffff;
        }

        .indicator-btn.bearish {
            border-color: #ef4444;
            color: #ef4444;
        }

        .indicator-btn.bearish:hover,
        .indicator-btn.bearish.active {
            background: #ef4444;
            color: #ffffff;
        }

        .save-button {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #f7931a 0%, #ff9900 100%);
            border: none;
            border-radius: 10px;
            color: #ffffff;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s;
        }

        .save-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(247, 147, 26, 0.4);
        }

        /* ä¼šå‘˜ç®¡ç† */
        .member-controls {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }

        .search-box {
            flex: 1;
            padding: 12px 16px;
            background: rgba(30, 41, 59, 0.5);
            border: 1px solid rgba(255, 153, 0, 0.2);
            border-radius: 10px;
            color: #ffffff;
        }

        .member-table {
            width: 100%;
            border-collapse: collapse;
            background: rgba(30, 41, 59, 0.5);
            border-radius: 10px;
            overflow: hidden;
        }

        .member-table th {
            background: rgba(247, 147, 26, 0.2);
            padding: 15px;
            text-align: left;
            color: #f7931a;
            font-weight: 600;
        }

        .member-table td {
            padding: 15px;
            border-top: 1px solid rgba(255, 153, 0, 0.1);
            color: #cbd5e0;
        }

        .member-table tr:hover {
            background: rgba(247, 147, 26, 0.05);
        }

        .status-active {
            color: #10b981;
            font-weight: 600;
        }

        .status-expired {
            color: #ef4444;
            font-weight: 600;
        }

        .status-trial {
            color: #10b981;
            font-weight: 600;
        }

        .trial-badge {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: #fff;
            padding: 6px 12px;
            border-radius: 8px;
            font-weight: 700;
            font-size: 0.85rem;
        }

        .renewal-reminder {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(245, 158, 11, 0.3);
            z-index: 9999;
            max-width: 350px;
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }


        .status-pending {
            color: #f59e0b;
            font-weight: 600;
        }

        .btn-small {
            padding: 5px 10px;
            border-radius: 5px;
            border: none;
            cursor: pointer;
            font-size: 0.85rem;
            margin-right: 5px;
            transition: all 0.3s;
        }

        .btn-edit {
            background: #3b82f6;
            color: white;
        }

        .btn-edit:hover {
            background: #2563eb;
        }

        .btn-delete {
            background: #ef4444;
            color: white;
        }

        .btn-delete:hover {
            background: #dc2626;
        }

        /* æ¨¡æ€æ¡† */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 9999;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: rgba(21, 25, 50, 0.95);
            border: 1px solid rgba(255, 153, 0, 0.3);
            border-radius: 20px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
            backdrop-filter: blur(10px);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-header h3 {
            color: #f7931a;
            font-size: 1.5rem;
        }

        .btn-close {
            background: none;
            border: none;
            color: #a0aec0;
            font-size: 1.5rem;
            cursor: pointer;
        }

        .btn-close:hover {
            color: #ef4444;
        }

        .modal-body {
            margin-bottom: 20px;
        }

        .modal-footer {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
        }

        .btn-cancel {
            padding: 10px 20px;
            background: rgba(107, 114, 128, 0.3);
            border: 1px solid rgba(107, 114, 128, 0.5);
            border-radius: 8px;
            color: #cbd5e0;
            cursor: pointer;
        }

        .btn-confirm {
            padding: 10px 20px;
            background: linear-gradient(135deg, #f7931a 0%, #ff9900 100%);
            border: none;
            border-radius: 8px;
            color: #ffffff;
            font-weight: 600;
            cursor: pointer;
        }

        .radio-group {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 15px;
        }

        .radio-option {
            padding: 15px;
            background: rgba(30, 41, 59, 0.5);
            border: 2px solid rgba(255, 153, 0, 0.2);
            border-radius: 10px;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s;
        }

        .radio-option:hover {
            border-color: #f7931a;
        }

        .radio-option.selected {
            border-color: #f7931a;
            background: rgba(247, 147, 26, 0.2);
        }

        .radio-option input {
            display: none;
        }

        /* å“åº”å¼ */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }

            .header {
                flex-direction: column;
                gap: 15px;
            }

            .dashboard {
                grid-template-columns: 1fr;
            }

            .pricing-grid {
                grid-template-columns: 1fr;
            }

            .indicators-grid {
                grid-template-columns: 1fr;
            }

            .admin-tabs {
                flex-direction: column;
            }

            .member-controls {
                flex-direction: column;
            }

            .member-table {
                font-size: 0.85rem;
            }

            .member-table th,
            .member-table td {
                padding: 10px;
            }
        }
    </style>
</head>
<body>
    <!-- ç™»å½•ç•Œé¢ -->
    <div id="loginContainer" class="container">
        <div class="login-box">
            <div class="btc-logo">â‚¿</div>
            <h1>BTCç»¼åˆæŒ‡æ ‡ç³»ç»Ÿ</h1>
            <p class="subtitle">ä»˜è´¹è®¢é˜…ç‰ˆ - ä¸“ä¸šæŠ•ç ”æœåŠ¡</p>
            
            <form id="loginForm">
                <div class="form-group">
                    <label for="email">é‚®ç®±åœ°å€</label>
                    <input type="email" id="email" placeholder="è¯·è¾“å…¥é‚®ç®±" required>
                </div>
                <div class="form-group">
                    <label for="password">å¯†ç </label>
                    <input type="password" id="password" placeholder="è‡³å°‘6ä½å­—ç¬¦" required>
                </div>
                <button type="submit" class="btn btn-primary">ç™»å½•</button>
                <button type="button" id="registerBtn" class="btn btn-secondary">æ³¨å†Œæ–°è´¦å·</button>
            </form>
        </div>
    </div>

    <!-- ä»˜è´¹é¡µé¢ -->
    <div id="paymentContainer" class="container hidden">
        <div class="payment-page">
            <div class="payment-card">
                <div class="payment-header">
                    <div class="btc-logo">â‚¿</div>
                    <h2>æ¬¢è¿è®¢é˜… BTC ç»¼åˆæŒ‡æ ‡ç³»ç»Ÿ</h2>
                    <p>ä¸“ä¸šæŠ•ç ”å›¢é˜Ÿæ¯æ—¥æ›´æ–° Â· 20é¡¹æ ¸å¿ƒæŒ‡æ ‡ Â· å¤šç»´åº¦é‡åŒ–åˆ†æ</p>
                </div>

                <!-- å…è´¹è¯•ç”¨æ¨ªå¹… -->
                <div style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); 
                            padding: 20px; 
                            border-radius: 15px; 
                            text-align: center; 
                            margin-bottom: 20px;
                            box-shadow: 0 10px 30px rgba(16, 185, 129, 0.3);
                            animation: pulse 2s infinite;">
                    <h3 style="color: #fff; font-size: 1.5rem; margin-bottom: 10px;">
                        ğŸ æ–°ç”¨æˆ·ç¦åˆ©ï¼šå…è´¹è¯•ç”¨ 7 å¤©ï¼
                    </h3>
                    <p style="color: rgba(255,255,255,0.9); font-size: 1rem;">
                        æ— éœ€ä»˜è´¹ï¼Œæ³¨å†Œå³å¯ä½“éªŒå…¨éƒ¨åŠŸèƒ½ Â· æ»¡æ„åéšæ—¶å‡çº§
                    </p>
                </div>


                
                <!-- è¯•ç”¨ç»“æŸæç¤º -->
                <div style="background: rgba(16, 185, 129, 0.1); 
                            border: 2px solid #10b981; 
                            border-radius: 10px; 
                            padding: 15px; 
                            text-align: center; 
                            margin-bottom: 20px;">
                    <p style="color: #10b981; font-size: 1.1rem; font-weight: 600;">
                        âœ¨ è¯•ç”¨ç»“æŸåï¼Œé€‰æ‹©ä»¥ä¸‹å¥—é¤ç»§ç»­ä½¿ç”¨
                    </p>
                </div>

                <div class="pricing-grid">
                    <div class="pricing-item">
                        <div class="pricing-title">æœˆåº¦ä¼šå‘˜</div>
                        <div class="pricing-price">29<span style="font-size: 1rem;"> USDT</span></div>
                        <div class="pricing-period">æ¯æœˆ</div>
                    </div>

                    <div class="pricing-item recommended">
                        <div class="pricing-badge">æ¨è</div>
                        <div class="pricing-title">å­£åº¦ä¼šå‘˜</div>
                        <div class="pricing-price">59<span style="font-size: 1rem;"> USDT</span></div>
                        <div class="pricing-period">3ä¸ªæœˆ</div>
                        <div class="pricing-save">çœ 28 USDT</div>
                    </div>

                    <div class="pricing-item">
                        <div class="pricing-title">å¹´åº¦ä¼šå‘˜</div>
                        <div class="pricing-price">199<span style="font-size: 1rem;"> USDT</span></div>
                        <div class="pricing-period">12ä¸ªæœˆ</div>
                        <div class="pricing-save">çœ 149 USDT</div>
                    </div>
                </div>

                <div class="wallet-section">
                    <div class="wallet-title">ğŸ’° BSCé“¾ USDT æ”¶æ¬¾åœ°å€</div>
                    <div class="wallet-address">
                        <input type="text" id="walletAddress" value="0xead8c64f073580fa23831cdbdac19ffb7909b9c4" readonly>
                        <button class="btn-copy" onclick="copyWallet()">å¤åˆ¶</button>
                    </div>
                    <p style="color: #a0aec0; font-size: 0.85rem; margin-top: 10px;">
                        âš ï¸ è¯·åŠ¡å¿…ä½¿ç”¨ <strong style="color: #f7931a;">BSCé“¾ï¼ˆå¸å®‰æ™ºèƒ½é“¾ï¼‰</strong> è½¬è´¦ USDT
                    </p>
                </div>

                <div class="payment-steps">
                    <div class="step-item">
                        <div class="step-number">1</div>
                        <div class="step-content">
                            <h4>å¤åˆ¶é’±åŒ…åœ°å€</h4>
                            <p>ç‚¹å‡»ä¸Šæ–¹"å¤åˆ¶"æŒ‰é’®ï¼Œå¤åˆ¶BSCé“¾USDTæ”¶æ¬¾åœ°å€</p>
                        </div>
                    </div>
                    <div class="step-item">
                        <div class="step-number">2</div>
                        <div class="step-content">
                            <h4>è½¬è´¦å¯¹åº”é‡‘é¢</h4>
                            <p>ä½¿ç”¨é’±åŒ…è½¬è´¦å¯¹åº”å¥—é¤çš„USDTé‡‘é¢åˆ°æ”¶æ¬¾åœ°å€</p>
                        </div>
                    </div>
                    <div class="step-item">
                        <div class="step-number">3</div>
                        <div class="step-content">
                            <h4>æˆªå›¾è½¬è´¦è®°å½•</h4>
                            <p>è½¬è´¦å®Œæˆåï¼Œæˆªå›¾ä¿å­˜äº¤æ˜“è®°å½•</p>
                        </div>
                    </div>
                    <div class="step-item">
                        <div class="step-number">4</div>
                        <div class="step-content">
                            <h4>è”ç³»å®¢æœæ¿€æ´»</h4>
                            <p>å‘é€æˆªå›¾ + æ³¨å†Œé‚®ç®±ç»™å®¢æœï¼Œç­‰å¾…æ¿€æ´»</p>
                        </div>
                    </div>
                    <div class="step-item">
                        <div class="step-number">5</div>
                        <div class="step-content">
                            <h4>å¼€å§‹ä½¿ç”¨</h4>
                            <p>æ¿€æ´»ååˆ·æ–°é¡µé¢å³å¯æŸ¥çœ‹ä¸“ä¸šæŒ‡æ ‡åˆ†æ</p>
                        </div>
                    </div>
                </div>

                <div class="contact-info">
                    <p>ğŸ’¬ å®¢æœè”ç³»æ–¹å¼</p>
                    <p><strong>Xï¼š@btc_tigerx</strong></p>
                    <p><strong>Telegramï¼š@ethbull8</strong></p>
                    <p style="margin-top: 15px; font-size: 0.85rem; color: #a0aec0;">
                        æ¿€æ´»é€šå¸¸åœ¨10åˆ†é’Ÿå†…å®Œæˆ<br>
                        é‡åˆ°é—®é¢˜è¯·è”ç³»å®¢æœ
                    </p>
                </div>
            </div>

            <div style="text-align: center; padding: 20px;">
                <button class="btn-logout" onclick="firebase.auth().signOut()">é€€å‡ºç™»å½•</button>
            </div>
        </div>
    </div>

    <!-- ä¼šå‘˜æŸ¥çœ‹é¡µé¢ -->
    <div id="memberContainer" class="container hidden">
        <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
        <div class="header">
            <div class="header-title">
                <div class="header-btc-logo">â‚¿</div>
                <div class="header-text">
                    <h2>BTCç»¼åˆæŒ‡æ ‡ç³»ç»Ÿ</h2>
                    <p style="color: #a0aec0; font-size: 0.9rem;">ä¸“ä¸šæŠ•ç ” Â· ä¼šå‘˜ä¸“äº«</p>
                </div>
            </div>
            <div class="user-info">
                <span id="memberEmail" style="color: #cbd5e0;"></span>
                <span class="vip-badge">ğŸ’ VIPä¼šå‘˜</span>
                <span id="memberExpiry" class="expiry-info"></span>
                <button id="memberLogoutBtn" class="btn-logout">é€€å‡º</button>
            </div>
        </div>

        <div class="update-time">
            <strong>ğŸ“… æ•°æ®æ›´æ–°æ—¶é—´ï¼š</strong><span id="updateTime">åŠ è½½ä¸­...</span>
        </div>

        <!-- ä»ªè¡¨ç›˜ -->
        <div class="dashboard">
            <div class="dashboard-card">
                <h3>BTC å½“å‰ä»·æ ¼</h3>
                <div id="btcPrice" class="dashboard-value neutral">åŠ è½½ä¸­...</div>
                <div id="btcChange" class="dashboard-change">24h æ¶¨è·Œ: --</div>
            </div>
            <div class="dashboard-card">
                <h3>ç»¼åˆå¾—åˆ†</h3>
                <div id="totalScore" class="dashboard-value neutral">0</div>
                <div class="dashboard-change">èŒƒå›´: -20 ~ +20</div>
            </div>
            <div class="dashboard-card">
                <h3>çœ‹å¤šæŒ‡æ ‡</h3>
                <div id="bullishCount" class="dashboard-value positive">0</div>
                <div class="dashboard-change">ä¸ª</div>
            </div>
            <div class="dashboard-card">
                <h3>çœ‹ç©ºæŒ‡æ ‡</h3>
                <div id="bearishCount" class="dashboard-value negative">0</div>
                <div class="dashboard-change">ä¸ª</div>
            </div>
        </div>

        <!-- é›·è¾¾å›¾ -->
        <div class="radar-container">
            <h3>â‚¿ å¤šç»´åº¦åˆ†æé›·è¾¾å›¾</h3>
            <canvas id="memberRadarChart"></canvas>
        </div>

        <!-- æŒ‡æ ‡åŒºåŸŸï¼ˆåªè¯»æ˜¾ç¤ºï¼‰ -->
        <div class="indicators-section">
            <h3 class="category-title">ğŸ“Š æŠ€æœ¯æŒ‡æ ‡ (5é¡¹)</h3>
            <div id="memberTechnicalIndicators" class="indicators-grid"></div>

            <h3 class="category-title">ğŸ’° èµ„é‡‘é¢ (5é¡¹)</h3>
            <div id="memberFundingIndicators" class="indicators-grid"></div>

            <h3 class="category-title">â›“ï¸ é“¾ä¸Šæ•°æ® (5é¡¹)</h3>
            <div id="memberOnchainIndicators" class="indicators-grid"></div>

            <h3 class="category-title">ğŸ˜Š å¸‚åœºæƒ…ç»ª (5é¡¹)</h3>
            <div id="memberSentimentIndicators" class="indicators-grid"></div>
        </div>
    </div>

    <!-- ç®¡ç†å‘˜ç•Œé¢ -->
    <div id="adminContainer" class="container hidden">
        <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
        <div class="header">
            <div class="header-title">
                <div class="header-btc-logo">â‚¿</div>
                <div class="header-text">
                    <h2>ç®¡ç†å‘˜æ§åˆ¶é¢æ¿</h2>
                    <p style="color: #a0aec0; font-size: 0.9rem;">BTCç»¼åˆæŒ‡æ ‡ç³»ç»Ÿ</p>
                </div>
            </div>
            <div class="user-info">
                <span id="adminEmail" style="color: #cbd5e0;"></span>
                <span class="user-badge">ğŸ”§ è¶…çº§ç®¡ç†å‘˜</span>
                <button id="adminLogoutBtn" class="btn-logout">é€€å‡º</button>
            </div>
        </div>

        <div class="admin-panel">
            <div class="admin-tabs">
                <button class="admin-tab active" onclick="switchAdminTab('update')">æ›´æ–°æŒ‡æ ‡</button>
                <button class="admin-tab" onclick="switchAdminTab('members')">ä¼šå‘˜ç®¡ç†</button>
            </div>

            <!-- æ›´æ–°æŒ‡æ ‡æ ‡ç­¾é¡µ -->
            <div id="adminUpdateTab" class="admin-content active">
                <div class="update-time" style="margin-bottom: 20px;">
                    <strong>å½“å‰ç»¼åˆå¾—åˆ†ï¼š</strong><span id="adminTotalScore">0</span>
                </div>

                <div class="indicators-section">
                    <h3 class="category-title">ğŸ“Š æŠ€æœ¯æŒ‡æ ‡ (5é¡¹)</h3>
                    <div id="adminTechnicalIndicators" class="indicators-grid"></div>

                    <h3 class="category-title">ğŸ’° èµ„é‡‘é¢ (5é¡¹)</h3>
                    <div id="adminFundingIndicators" class="indicators-grid"></div>

                    <h3 class="category-title">â›“ï¸ é“¾ä¸Šæ•°æ® (5é¡¹)</h3>
                    <div id="adminOnchainIndicators" class="indicators-grid"></div>

                    <h3 class="category-title">ğŸ˜Š å¸‚åœºæƒ…ç»ª (5é¡¹)</h3>
                    <div id="adminSentimentIndicators" class="indicators-grid"></div>
                </div>

                <button class="save-button" onclick="saveIndicators()">ğŸ’¾ ä¿å­˜å¹¶å‘å¸ƒæ›´æ–°</button>
            </div>

            <!-- ä¼šå‘˜ç®¡ç†æ ‡ç­¾é¡µ -->
            <div id="adminMembersTab" class="admin-content">
                <div class="member-controls">
                    <input type="text" class="search-box" id="memberSearch" placeholder="æœç´¢é‚®ç®±...">
                    <button class="btn btn-primary" style="width: auto; padding: 12px 30px;" onclick="showAddMemberModal()">
                        â• æ·»åŠ ä¼šå‘˜
                    </button>
                </div>

                <div style="overflow-x: auto;">
                    <table class="member-table">
                        <thead>
                            <tr>
                                <th>é‚®ç®±</th>
                                <th>çŠ¶æ€</th>
                                <th>è®¢é˜…ç±»å‹</th>
                                <th>åˆ°æœŸæ—¶é—´</th>
                                <th>æ³¨å†Œæ—¶é—´</th>
                                <th>æ“ä½œ</th>
                            </tr>
                        </thead>
                        <tbody id="memberTableBody">
                            <tr>
                                <td colspan="6" style="text-align: center; color: #a0aec0;">åŠ è½½ä¸­...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div style="margin-top: 20px; text-align: center; color: #a0aec0;">
                    æ€»ä¼šå‘˜æ•°ï¼š<strong id="totalMembers" style="color: #f7931a;">0</strong> |
                    æ´»è·ƒï¼š<strong id="activeMembers" style="color: #10b981;">0</strong> |
                    è¿‡æœŸï¼š<strong id="expiredMembers" style="color: #ef4444;">0</strong>
                </div>
            </div>
        </div>
    </div>

    <!-- æ·»åŠ /ç¼–è¾‘ä¼šå‘˜æ¨¡æ€æ¡† -->
    <div id="memberModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">æ·»åŠ æ–°ä¼šå‘˜</h3>
                <button class="btn-close" onclick="closeMemberModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>ä¼šå‘˜é‚®ç®±</label>
                    <input type="email" id="modalEmail" placeholder="user@example.com">
                </div>
                <div class="form-group">
                    <label>è®¢é˜…ç±»å‹</label>
                    <div class="radio-group">
                        <label class="radio-option">
                            <input type="radio" name="subscriptionType" value="monthly" checked>
                            <div>æœˆåº¦ä¼šå‘˜</div>
                            <div style="color: #f7931a; font-size: 0.9rem;">1ä¸ªæœˆ</div>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="subscriptionType" value="quarterly">
                            <div>å­£åº¦ä¼šå‘˜</div>
                            <div style="color: #f7931a; font-size: 0.9rem;">3ä¸ªæœˆ</div>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="subscriptionType" value="halfyearly">
                            <div>åŠå¹´ä¼šå‘˜</div>
                            <div style="color: #f7931a; font-size: 0.9rem;">6ä¸ªæœˆ</div>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="subscriptionType" value="yearly">
                            <div>å¹´åº¦ä¼šå‘˜</div>
                            <div style="color: #f7931a; font-size: 0.9rem;">12ä¸ªæœˆ</div>
                        </label>
                    </div>
                </div>
                <div class="form-group">
                    <label>å¤‡æ³¨ï¼ˆå¯é€‰ï¼‰</label>
                    <input type="text" id="modalNote" placeholder="ä»˜æ¬¾æ–¹å¼ã€äº¤æ˜“IDç­‰">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-cancel" onclick="closeMemberModal()">å–æ¶ˆ</button>
                <button class="btn-confirm" onclick="confirmAddMember()">ç¡®è®¤æ¿€æ´»</button>
            </div>
        </div>
    </div>

    <script>
        // Firebase é…ç½®
        const firebaseConfig = {
            apiKey: "AIzaSyCLXQoE3uk78co1R-GzcY5myrzciZ0CmpM",
            authDomain: "btc-indicator2.firebaseapp.com",
            projectId: "btc-indicator2",
            storageBucket: "btc-indicator2.firebasestorage.app",
            messagingSenderId: "639218085696",
            appId: "1:639218085696:web:c09a09eb257267429e54a5"
        };

        // åˆå§‹åŒ– Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        // ç®¡ç†å‘˜é‚®ç®±ï¼ˆé¦–ä¸ªæ³¨å†Œç”¨æˆ·è‡ªåŠ¨æˆä¸ºç®¡ç†å‘˜ï¼‰
        const ADMIN_EMAIL = 'YOUR_ADMIN_EMAIL@example.com'; // ä¿®æ”¹ä¸ºä½ çš„ç®¡ç†å‘˜é‚®ç®±

        // 20ä¸ªæŒ‡æ ‡é…ç½®
        const indicators = {
            technical: [
                { id: 'macd', name: 'MACD' },
                { id: 'rsi', name: 'RSI' },
                { id: 'kdj', name: 'KDJ' },
                { id: 'boll', name: 'BOLLå¸ƒæ—å¸¦' },
                { id: 'ma', name: 'MAå‡çº¿' }
            ],
            funding: [
                { id: 'volume', name: 'æˆäº¤é‡' },
                { id: 'flow', name: 'èµ„é‡‘æµå‘' },
                { id: 'chips', name: 'ç­¹ç åˆ†å¸ƒ' },
                { id: 'obv', name: 'OBVèƒ½é‡æ½®' },
                { id: 'cci', name: 'CCIé¡ºåŠ¿æŒ‡æ ‡' }
            ],
            onchain: [
                { id: 'addresses', name: 'æŒå¸åœ°å€æ•°' },
                { id: 'exchange_inflow', name: 'äº¤æ˜“æ‰€æµå…¥' },
                { id: 'exchange_outflow', name: 'äº¤æ˜“æ‰€æµå‡º' },
                { id: 'whale', name: 'å·¨é²¸æŒä»“' },
                { id: 'activity', name: 'é“¾ä¸Šæ´»è·ƒåº¦' }
            ],
            sentiment: [
                { id: 'greed', name: 'è´ªå©ªæŒ‡æ•°' },
                { id: 'fear', name: 'ææ…ŒæŒ‡æ•°' },
                { id: 'contract', name: 'åˆçº¦å¤šç©ºæ¯”' },
                { id: 'etf', name: 'ETFæµå…¥' },
                { id: 'social', name: 'ç¤¾äº¤åª’ä½“çƒ­åº¦' }
            ]
        };

        let currentScores = {};
        let currentUser = null;
        let radarChart = null;
        let editingMemberId = null;

        // åˆå§‹åŒ–æ‰€æœ‰æŒ‡æ ‡ä¸º0
        Object.values(indicators).flat().forEach(ind => {
            currentScores[ind.id] = 0;
        });

        // ç™»å½•
        document.getElementById('loginForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;

            try {
                await auth.signInWithEmailAndPassword(email, password);
            } catch (error) {
                alert('ç™»å½•å¤±è´¥: ' + error.message);
            }
        });

        // æ³¨å†Œ
        document.getElementById('registerBtn').addEventListener('click', async () => {
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;

            if (!email || !password) {
                alert('è¯·å¡«å†™é‚®ç®±å’Œå¯†ç ');
                return;
            }

            if (password.length < 6) {
                alert('å¯†ç è‡³å°‘éœ€è¦6ä½å­—ç¬¦');
                return;
            }

            try {
                const userCredential = await auth.createUserWithEmailAndPassword(email, password);
                
                // æ£€æŸ¥æ˜¯å¦ä¸ºé¦–ä¸ªç”¨æˆ·
                const usersSnapshot = await db.collection('users').get();
                const isFirstUser = usersSnapshot.empty;
                
                // åˆ›å»ºç”¨æˆ·æ–‡æ¡£
                await db.collection('users').doc(userCredential.user.uid).set({
                    email: email,
                    role: isFirstUser || email === ADMIN_EMAIL ? 'admin' : 'user',
                    isPaid: false,
                    subscriptionType: null,
                    expiryDate: null,
                    createdAt: firebase.firestore.FieldValue.serverTimestamp()
                });

                alert('æ³¨å†ŒæˆåŠŸï¼');
            } catch (error) {
                alert('æ³¨å†Œå¤±è´¥: ' + error.message);
            }
        });

        // é€€å‡ºç™»å½•
        document.getElementById('memberLogoutBtn').addEventListener('click', () => auth.signOut());
        document.getElementById('adminLogoutBtn').addEventListener('click', () => auth.signOut());

        // ç›‘å¬ç™»å½•çŠ¶æ€
        auth.onAuthStateChanged(async (user) => {
            if (user) {
                currentUser = user;
                const userDoc = await db.collection('users').doc(user.uid).get();
                
                if (!userDoc.exists) {
                    // åˆ›å»ºç”¨æˆ·æ–‡æ¡£
                    await db.collection('users').doc(user.uid).set({
                        email: user.email,
                        role: 'user',
                        isPaid: false,
                        subscriptionType: null,
                        expiryDate: null,
                        createdAt: firebase.firestore.FieldValue.serverTimestamp()
                    });
                }

                const userData = userDoc.data();
                
                // éšè—ç™»å½•ç•Œé¢
                document.getElementById('loginContainer').classList.add('hidden');
                
                // æ ¹æ®è§’è‰²å’Œä»˜è´¹çŠ¶æ€æ˜¾ç¤ºä¸åŒç•Œé¢
                if (userData.role === 'admin') {
                    // æ˜¾ç¤ºç®¡ç†å‘˜ç•Œé¢
                    showAdminInterface(user.email);
                } else if (userData.isPaid && userData.expiryDate) {
                    // æ£€æŸ¥æ˜¯å¦è¿‡æœŸ
                    const expiryDate = userData.expiryDate.toDate();
                    if (expiryDate > new Date()) {
                        // æ˜¾ç¤ºä¼šå‘˜ç•Œé¢
                        showMemberInterface(user.email, expiryDate);
                    } else {
                        // æ˜¾ç¤ºä»˜è´¹é¡µé¢
                        showPaymentPage(user.email);
                    }
                } else {
                    // æ˜¾ç¤ºä»˜è´¹é¡µé¢
                    showPaymentPage(user.email);
                }
            } else {
                // æ˜¾ç¤ºç™»å½•ç•Œé¢
                document.getElementById('loginContainer').classList.remove('hidden');
                document.getElementById('paymentContainer').classList.add('hidden');
                document.getElementById('memberContainer').classList.add('hidden');
                document.getElementById('adminContainer').classList.add('hidden');
            }
        });

        // æ˜¾ç¤ºä»˜è´¹é¡µé¢
        function showPaymentPage(email) {
            document.getElementById('paymentContainer').classList.remove('hidden');
            document.getElementById('memberContainer').classList.add('hidden');
            document.getElementById('adminContainer').classList.add('hidden');
        }

        // æ˜¾ç¤ºä¼šå‘˜ç•Œé¢
        async function showMemberInterface(email, expiryDate) {
            document.getElementById('paymentContainer').classList.add('hidden');
            document.getElementById('memberContainer').classList.remove('hidden');
            document.getElementById('adminContainer').classList.add('hidden');

            document.getElementById('memberEmail').textContent = email;
            
            // è·å–ç”¨æˆ·æ•°æ®åˆ¤æ–­æ˜¯å¦è¯•ç”¨
            const userDoc = await db.collection('users').doc(currentUser.uid).get();
            const userData = userDoc.data();
            
            // è®¡ç®—å‰©ä½™å¤©æ•°
            const now = new Date();
            const expiry = expiryDate.toDate();
            const daysLeft = Math.ceil((expiry - now) / (1000 * 60 * 60 * 24));
            
            // è®¾ç½®ä¼šå‘˜æ ‡è¯†
            const badgeElement = document.querySelector('.vip-badge');
            if (userData && userData.isTrial) {
                badgeElement.textContent = `ğŸ è¯•ç”¨ä¼šå‘˜ (å‰©ä½™${daysLeft}å¤©)`;
                badgeElement.className = 'trial-badge';
            } else {
                badgeElement.textContent = 'ğŸ’ VIPä¼šå‘˜';
                badgeElement.className = 'vip-badge';
            }
            
            // è®¾ç½®åˆ°æœŸä¿¡æ¯
            const expiryInfo = document.getElementById('memberExpiry');
            if (userData && userData.isTrial && daysLeft <= 3) {
                expiryInfo.innerHTML = `<span style="color: #f59e0b;">âš ï¸ è¯•ç”¨å³å°†åˆ°æœŸï¼Œå‰©ä½™ ${daysLeft} å¤©</span>`;
                // æ˜¾ç¤ºç»­è´¹æé†’
                showRenewalReminder(daysLeft);
            } else {
                expiryInfo.textContent = 'åˆ°æœŸ: ' + expiryDate.toLocaleDateString('zh-CN');
            }

            // åŠ è½½æœ€æ–°æŒ‡æ ‡æ•°æ®
            await loadLatestIndicators(true);
            
            // è·å–BTCä»·æ ¼
            fetchBTCPrice();
            setInterval(fetchBTCPrice, 30000);
        }

        // æ˜¾ç¤ºç®¡ç†å‘˜ç•Œé¢
        async function showAdminInterface(email) {
            document.getElementById('paymentContainer').classList.add('hidden');
            document.getElementById('memberContainer').classList.add('hidden');
            document.getElementById('adminContainer').classList.remove('hidden');

            document.getElementById('adminEmail').textContent = email;

            // åˆå§‹åŒ–ç®¡ç†å‘˜æŒ‡æ ‡ç¼–è¾‘ç•Œé¢
            initAdminIndicators();
            
            // åŠ è½½æœ€æ–°æŒ‡æ ‡
            await loadLatestIndicators(false);
            
            // åŠ è½½ä¼šå‘˜åˆ—è¡¨
            loadMemberList();
        }

        // åˆå§‹åŒ–ç®¡ç†å‘˜æŒ‡æ ‡ç¼–è¾‘ç•Œé¢
        function initAdminIndicators() {
            const categories = [
                { id: 'adminTechnicalIndicators', data: indicators.technical },
                { id: 'adminFundingIndicators', data: indicators.funding },
                { id: 'adminOnchainIndicators', data: indicators.onchain },
                { id: 'adminSentimentIndicators', data: indicators.sentiment }
            ];

            categories.forEach(cat => {
                const container = document.getElementById(cat.id);
                container.innerHTML = '';
                
                cat.data.forEach(ind => {
                    const card = document.createElement('div');
                    card.className = 'indicator-card';
                    card.innerHTML = `
                        <div class="indicator-name">${ind.name}</div>
                        <div class="indicator-buttons">
                            <button class="indicator-btn bullish" data-id="${ind.id}" data-value="1">
                                çœ‹å¤š +1
                            </button>
                            <button class="indicator-btn neutral" data-id="${ind.id}" data-value="0">
                                ä¸­æ€§ 0
                            </button>
                            <button class="indicator-btn bearish" data-id="${ind.id}" data-value="-1">
                                çœ‹ç©º -1
                            </button>
                        </div>
                    `;
                    container.appendChild(card);
                });
            });

            // æ·»åŠ æŒ‰é’®ç‚¹å‡»äº‹ä»¶
            document.querySelectorAll('.indicator-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = this.dataset.id;
                    const value = parseInt(this.dataset.value);
                    
                    currentScores[id] = value;
                    
                    this.parentElement.querySelectorAll('.indicator-btn').forEach(b => {
                        b.classList.remove('active');
                    });
                    this.classList.add('active');
                    
                    updateAdminScore();
                });
            });
        }

        // æ›´æ–°ç®¡ç†å‘˜ç»¼åˆå¾—åˆ†æ˜¾ç¤º
        function updateAdminScore() {
            const total = Object.values(currentScores).reduce((a, b) => a + b, 0);
            document.getElementById('adminTotalScore').textContent = total > 0 ? '+' + total : total;
        }

        // åŠ è½½æœ€æ–°æŒ‡æ ‡æ•°æ®
        async function loadLatestIndicators(isMemberView) {
            try {
                const snapshot = await db.collection('indicators')
                    .orderBy('timestamp', 'desc')
                    .limit(1)
                    .get();

                if (!snapshot.empty) {
                    const data = snapshot.docs[0].data();
                    currentScores = data.scores || {};
                    
                    if (isMemberView) {
                        // æ˜¾ç¤ºä¼šå‘˜åªè¯»ç•Œé¢
                        displayMemberIndicators();
                        updateMemberDashboard();
                        initMemberRadarChart();
                        
                        // æ˜¾ç¤ºæ›´æ–°æ—¶é—´
                        if (data.timestamp) {
                            const updateTime = data.timestamp.toDate().toLocaleString('zh-CN');
                            document.getElementById('updateTime').textContent = updateTime;
                        }
                    } else {
                        // æ¢å¤ç®¡ç†å‘˜ç¼–è¾‘çŠ¶æ€
                        Object.entries(currentScores).forEach(([id, value]) => {
                            const btns = document.querySelectorAll(`[data-id="${id}"]`);
                            btns.forEach(btn => {
                                btn.classList.remove('active');
                                if (parseInt(btn.dataset.value) === value) {
                                    btn.classList.add('active');
                                }
                            });
                        });
                        updateAdminScore();
                    }
                }
            } catch (error) {
                console.error('åŠ è½½æŒ‡æ ‡å¤±è´¥:', error);
            }
        }

        // æ˜¾ç¤ºä¼šå‘˜åªè¯»æŒ‡æ ‡
        function displayMemberIndicators() {
            const categories = [
                { id: 'memberTechnicalIndicators', data: indicators.technical },
                { id: 'memberFundingIndicators', data: indicators.funding },
                { id: 'memberOnchainIndicators', data: indicators.onchain },
                { id: 'memberSentimentIndicators', data: indicators.sentiment }
            ];

            categories.forEach(cat => {
                const container = document.getElementById(cat.id);
                container.innerHTML = '';
                
                cat.data.forEach(ind => {
                    const value = currentScores[ind.id] || 0;
                    const valueClass = value > 0 ? 'bullish' : value < 0 ? 'bearish' : 'neutral';
                    const valueText = value > 0 ? 'çœ‹å¤š +1' : value < 0 ? 'çœ‹ç©º -1' : 'ä¸­æ€§ 0';
                    
                    const card = document.createElement('div');
                    card.className = 'indicator-card';
                    card.innerHTML = `
                        <div class="indicator-name">${ind.name}</div>
                        <div class="indicator-value ${valueClass}">${valueText}</div>
                    `;
                    container.appendChild(card);
                });
            });
        }

        // æ›´æ–°ä¼šå‘˜ä»ªè¡¨ç›˜
        function updateMemberDashboard() {
            const scores = Object.values(currentScores);
            const total = scores.reduce((a, b) => a + b, 0);
            const bullish = scores.filter(s => s > 0).length;
            const bearish = scores.filter(s => s < 0).length;

            const totalEl = document.getElementById('totalScore');
            totalEl.textContent = total > 0 ? '+' + total : total;
            totalEl.className = 'dashboard-value ' + 
                (total > 0 ? 'positive' : total < 0 ? 'negative' : 'neutral');

            document.getElementById('bullishCount').textContent = bullish;
            document.getElementById('bearishCount').textContent = bearish;
        }

        // åˆå§‹åŒ–ä¼šå‘˜é›·è¾¾å›¾
        function initMemberRadarChart() {
            const ctx = document.getElementById('memberRadarChart').getContext('2d');
            
            if (radarChart) {
                radarChart.destroy();
            }

            const technical = indicators.technical.reduce((sum, ind) => sum + (currentScores[ind.id] || 0), 0);
            const funding = indicators.funding.reduce((sum, ind) => sum + (currentScores[ind.id] || 0), 0);
            const onchain = indicators.onchain.reduce((sum, ind) => sum + (currentScores[ind.id] || 0), 0);
            const sentiment = indicators.sentiment.reduce((sum, ind) => sum + (currentScores[ind.id] || 0), 0);
            const total = Object.values(currentScores).reduce((a, b) => a + b, 0);

            radarChart = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: ['æŠ€æœ¯æŒ‡æ ‡', 'èµ„é‡‘é¢', 'é“¾ä¸Šæ•°æ®', 'å¸‚åœºæƒ…ç»ª', 'ç»¼åˆè¯„åˆ†'],
                    datasets: [{
                        label: 'å½“å‰è¯„åˆ†',
                        data: [technical, funding, onchain, sentiment, total / 4],
                        backgroundColor: 'rgba(247, 147, 26, 0.2)',
                        borderColor: 'rgba(247, 147, 26, 1)',
                        borderWidth: 2,
                        pointBackgroundColor: 'rgba(247, 147, 26, 1)',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: 'rgba(247, 147, 26, 1)'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    scales: {
                        r: {
                            beginAtZero: true,
                            min: -5,
                            max: 5,
                            ticks: {
                                stepSize: 1,
                                color: '#a0aec0'
                            },
                            grid: {
                                color: 'rgba(255, 153, 0, 0.1)'
                            },
                            pointLabels: {
                                color: '#f7931a',
                                font: {
                                    size: 14,
                                    weight: 'bold'
                                }
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            labels: {
                                color: '#cbd5e0'
                            }
                        }
                    }
                }
            });
        }

        // è·å–BTCä»·æ ¼
        async function fetchBTCPrice() {
            try {
                const response = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=usd&include_24hr_change=true');
                const data = await response.json();
                
                const price = data.bitcoin.usd;
                const change = data.bitcoin.usd_24h_change;
                
                document.getElementById('btcPrice').textContent = '$' + price.toLocaleString();
                
                const changeEl = document.getElementById('btcChange');
                changeEl.textContent = `24h æ¶¨è·Œ: ${change >= 0 ? '+' : ''}${change.toFixed(2)}%`;
                changeEl.style.color = change >= 0 ? '#10b981' : '#ef4444';
            } catch (error) {
                console.error('è·å–BTCä»·æ ¼å¤±è´¥:', error);
            }
        }

        // ä¿å­˜æŒ‡æ ‡ï¼ˆç®¡ç†å‘˜ï¼‰
        async function saveIndicators() {
            if (!currentUser) return;

            try {
                const total = Object.values(currentScores).reduce((a, b) => a + b, 0);
                
                await db.collection('indicators').add({
                    scores: currentScores,
                    totalScore: total,
                    updatedBy: currentUser.email,
                    timestamp: firebase.firestore.FieldValue.serverTimestamp()
                });

                alert('âœ… æŒ‡æ ‡å·²ä¿å­˜å¹¶å‘å¸ƒï¼æ‰€æœ‰ä¼šå‘˜å¯è§æœ€æ–°æ•°æ®ã€‚');
            } catch (error) {
                alert('ä¿å­˜å¤±è´¥: ' + error.message);
            }
        }

        // åˆ‡æ¢ç®¡ç†å‘˜æ ‡ç­¾é¡µ
        function switchAdminTab(tab) {
            document.querySelectorAll('.admin-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.admin-content').forEach(c => c.classList.remove('active'));
            
            if (tab === 'update') {
                document.querySelector('[onclick="switchAdminTab(\'update\')"]').classList.add('active');
                document.getElementById('adminUpdateTab').classList.add('active');
            } else if (tab === 'members') {
                document.querySelector('[onclick="switchAdminTab(\'members\')"]').classList.add('active');
                document.getElementById('adminMembersTab').classList.add('active');
                loadMemberList();
            }
        }

        // åŠ è½½ä¼šå‘˜åˆ—è¡¨
        async function loadMemberList() {
            try {
                const snapshot = await db.collection('users')
                    .where('role', '==', 'user')
                    .get();

                const tbody = document.getElementById('memberTableBody');
                tbody.innerHTML = '';

                let totalCount = 0;
                let activeCount = 0;
                let expiredCount = 0;

                if (snapshot.empty) {
                    tbody.innerHTML = '<tr><td colspan="6" style="text-align: center; color: #a0aec0;">æš‚æ— ä¼šå‘˜</td></tr>';
                } else {
                    snapshot.forEach(doc => {
                        const data = doc.data();
                        const row = document.createElement('tr');
                        
                        totalCount++;
                        
                        let status = 'æœªæ¿€æ´»';
                        let statusClass = 'status-pending';
                        
                        if (data.isPaid && data.expiryDate) {
                            const expiryDate = data.expiryDate.toDate();
                            if (expiryDate > new Date()) {
                                status = 'âœ… å·²æ¿€æ´»';
                                statusClass = 'status-active';
                                activeCount++;
                            } else {
                                status = 'â° å·²è¿‡æœŸ';
                                statusClass = 'status-expired';
                                expiredCount++;
                            }
                        }

                        const subscriptionType = data.subscriptionType ? 
                            {
                                'monthly': 'æœˆåº¦ä¼šå‘˜',
                                'quarterly': 'å­£åº¦ä¼šå‘˜',
                                'halfyearly': 'åŠå¹´ä¼šå‘˜',
                                'yearly': 'å¹´åº¦ä¼šå‘˜'
                            }[data.subscriptionType] : '-';

                        const expiryDateStr = data.expiryDate ? 
                            data.expiryDate.toDate().toLocaleDateString('zh-CN') : '-';

                        const createdAtStr = data.createdAt ? 
                            data.createdAt.toDate().toLocaleDateString('zh-CN') : '-';

                        row.innerHTML = `
                            <td>${data.email}</td>
                            <td><span class="${statusClass}">${status}</span></td>
                            <td>${subscriptionType}</td>
                            <td>${expiryDateStr}</td>
                            <td>${createdAtStr}</td>
                            <td>
                                <button class="btn-small btn-edit" onclick="editMember('${doc.id}')">ç¼–è¾‘</button>
                                <button class="btn-small btn-delete" onclick="deleteMember('${doc.id}', '${data.email}')">åˆ é™¤</button>
                            </td>
                        `;
                        
                        tbody.appendChild(row);
                    });
                }

                document.getElementById('totalMembers').textContent = totalCount;
                document.getElementById('activeMembers').textContent = activeCount;
                document.getElementById('expiredMembers').textContent = expiredCount;

            } catch (error) {
                console.error('åŠ è½½ä¼šå‘˜åˆ—è¡¨å¤±è´¥:', error);
            }
        }

        // æ˜¾ç¤ºæ·»åŠ ä¼šå‘˜æ¨¡æ€æ¡†
        function showAddMemberModal() {
            editingMemberId = null;
            document.getElementById('modalTitle').textContent = 'æ·»åŠ æ–°ä¼šå‘˜';
            document.getElementById('modalEmail').value = '';
            document.getElementById('modalEmail').readOnly = false;
            document.getElementById('modalNote').value = '';
            document.querySelectorAll('input[name="subscriptionType"]')[0].checked = true;
            document.getElementById('memberModal').classList.add('active');
        }

        // ç¼–è¾‘ä¼šå‘˜
        async function editMember(memberId) {
            try {
                const doc = await db.collection('users').doc(memberId).get();
                const data = doc.data();
                
                editingMemberId = memberId;
                document.getElementById('modalTitle').textContent = 'ç¼–è¾‘ä¼šå‘˜ä¿¡æ¯';
                document.getElementById('modalEmail').value = data.email;
                document.getElementById('modalEmail').readOnly = true;
                
                if (data.subscriptionType) {
                    document.querySelector(`input[name="subscriptionType"][value="${data.subscriptionType}"]`).checked = true;
                }
                
                document.getElementById('memberModal').classList.add('active');
            } catch (error) {
                alert('åŠ è½½ä¼šå‘˜ä¿¡æ¯å¤±è´¥: ' + error.message);
            }
        }

        // åˆ é™¤ä¼šå‘˜
        async function deleteMember(memberId, email) {
            if (!confirm(`ç¡®å®šè¦åˆ é™¤ä¼šå‘˜ ${email} å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ã€‚`)) {
                return;
            }

            try {
                await db.collection('users').doc(memberId).delete();
                alert('âœ… ä¼šå‘˜å·²åˆ é™¤');
                loadMemberList();
            } catch (error) {
                alert('åˆ é™¤å¤±è´¥: ' + error.message);
            }
        }

        // å…³é—­æ¨¡æ€æ¡†
        function closeMemberModal() {
            document.getElementById('memberModal').classList.remove('active');
        }

        // ç¡®è®¤æ·»åŠ /ç¼–è¾‘ä¼šå‘˜
        async function confirmAddMember() {
            const email = document.getElementById('modalEmail').value;
            const subscriptionType = document.querySelector('input[name="subscriptionType"]:checked').value;
            const note = document.getElementById('modalNote').value;

            if (!email) {
                alert('è¯·è¾“å…¥é‚®ç®±');
                return;
            }

            // è®¡ç®—åˆ°æœŸæ—¶é—´
            const now = new Date();
            const expiryDate = new Date(now);
            switch (subscriptionType) {
                case 'monthly':
                    expiryDate.setMonth(expiryDate.getMonth() + 1);
                    break;
                case 'quarterly':
                    expiryDate.setMonth(expiryDate.getMonth() + 3);
                    break;
                case 'halfyearly':
                    expiryDate.setMonth(expiryDate.getMonth() + 6);
                    break;
                case 'yearly':
                    expiryDate.setFullYear(expiryDate.getFullYear() + 1);
                    break;
            }

            try {
                if (editingMemberId) {
                    // æ›´æ–°ç°æœ‰ä¼šå‘˜
                    await db.collection('users').doc(editingMemberId).update({
                        isPaid: true,
                        subscriptionType: subscriptionType,
                        expiryDate: firebase.firestore.Timestamp.fromDate(expiryDate),
                        note: note,
                        updatedAt: firebase.firestore.FieldValue.serverTimestamp()
                    });
                    alert('âœ… ä¼šå‘˜ä¿¡æ¯å·²æ›´æ–°ï¼');
                } else {
                    // æŸ¥æ‰¾ç”¨æˆ·
                    const snapshot = await db.collection('users').where('email', '==', email).get();
                    
                    if (snapshot.empty) {
                        alert('âŒ è¯¥é‚®ç®±å°šæœªæ³¨å†Œï¼Œè¯·è®©ç”¨æˆ·å…ˆæ³¨å†Œè´¦å·ã€‚');
                        return;
                    }

                    const userId = snapshot.docs[0].id;
                    
                    // æ¿€æ´»ä¼šå‘˜
                    await db.collection('users').doc(userId).update({
                        isPaid: true,
                        subscriptionType: subscriptionType,
                        expiryDate: firebase.firestore.Timestamp.fromDate(expiryDate),
                        note: note,
                        activatedAt: firebase.firestore.FieldValue.serverTimestamp()
                    });

                    alert('âœ… ä¼šå‘˜å·²æ¿€æ´»ï¼ç”¨æˆ·åˆ·æ–°é¡µé¢å³å¯ä½¿ç”¨ã€‚');
                }

                closeMemberModal();
                loadMemberList();
            } catch (error) {
                alert('æ“ä½œå¤±è´¥: ' + error.message);
            }
        }

        // å¤åˆ¶é’±åŒ…åœ°å€
        function copyWallet() {
            const walletInput = document.getElementById('walletAddress');
            walletInput.select();
            document.execCommand('copy');
            
            const btn = event.target;
            const originalText = btn.textContent;
            btn.textContent = 'âœ“ å·²å¤åˆ¶';
            btn.style.background = '#10b981';
            
            setTimeout(() => {
                btn.textContent = originalText;
                btn.style.background = '#f7931a';
            }, 2000);
        }

        // å•é€‰æ¡†æ ·å¼
        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('.radio-option').forEach(option => {
                option.addEventListener('click', function() {
                    document.querySelectorAll('.radio-option').forEach(o => o.classList.remove('selected'));
                    this.classList.add('selected');
                    this.querySelector('input').checked = true;
                });
            });
        });

        // æ˜¾ç¤ºç»­è´¹æé†’å‡½æ•°
        function showRenewalReminder(daysLeft) {
            const reminder = document.createElement('div');
            reminder.className = 'renewal-reminder';
            reminder.innerHTML = `
                <h4 style="color: #fff; margin-bottom: 10px; font-size: 1.1rem;">â° è¯•ç”¨å³å°†åˆ°æœŸ</h4>
                <p style="color: rgba(255,255,255,0.9); margin-bottom: 15px; line-height: 1.5;">
                    æ‚¨çš„å…è´¹è¯•ç”¨è¿˜å‰© <strong>${daysLeft}</strong> å¤©<br>
                    ç«‹å³ç»­è´¹ï¼Œç»§ç»­äº«å—ä¸“ä¸šæŠ•ç ”æœåŠ¡ï¼
                </p>
                <button onclick="alert('è¯·æ·»åŠ å®¢æœå¾®ä¿¡ç»­è´¹ï¼šYourWeChatID\\næˆ– Telegram: @YourTelegramID')" 
                        style="width: 100%; padding: 12px; background: #fff; color: #d97706; 
                               border: none; border-radius: 8px; font-weight: 600; 
                               cursor: pointer; font-size: 1rem;">
                    ç«‹å³ç»­è´¹
                </button>
                <button onclick="this.parentElement.remove()" 
                        style="width: 100%; padding: 8px; background: transparent; color: rgba(255,255,255,0.7); 
                               border: none; margin-top: 8px; cursor: pointer; font-size: 0.9rem;">
                    ç¨åæé†’
                </button>
            `;
            document.body.appendChild(reminder);
        }

    </script>
</body>
</html>
